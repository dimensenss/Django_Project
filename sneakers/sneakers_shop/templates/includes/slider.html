{% load sneakers_tags %}

<div class="col-lg-6 col-md-6 border border-2 rounded-3 border-end-0 mt-4">
    <!-- Основная карусель -->
    <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">

        <!-- Основное изображение -->
        <div class="carousel-inner">
            {% if post.images %}
            {% get_main_photo post as main_photo %}
            <div class="carousel-item active">
                <img src="{{ main_photo.url }}" class="mx-auto d-block img-fluid" alt="Изображение товара">
            </div>
            {% endif %}

            <!-- Дополнительные изображения (перебор) -->
            {% get_photos post as query %}
            {% for image in query %}
            <div class="carousel-item">
                <img src="{{ image.image.url }}" class="mx-auto d-block img-fluid" alt="Изображение товара">
            </div>
            {% endfor %}
        </div>

        <!-- Стрелочки для листания -->
        <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <a class="a-dark"><i class="fa-solid fa-arrow-left"></i></a>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <a class="a-dark"><i class="fa-solid fa-arrow-right"></i></a>
        </button>
    </div>

    <!-- Миниатюры под главным фото -->
    {% if query.exists %}
    <div id="carousel-thumbs" class="d-none d-lg-flex flex-row w-100 mt-3">
        <!-- Основное изображение в навигации -->
        <div class="thumbnail" data-bs-target="#mainCarousel" data-bs-slide-to="0">
            <img src="{{ main_photo.url }}" class="img-carousel-size" alt="Изображение товара">
        </div>
        <!-- Дополнительные изображения в навигации (перебор) -->
        {% for image in query %}
        <div class="thumbnail pointer" data-bs-target="#mainCarousel" data-bs-slide-to="{{ forloop.counter }}">
            <img src="{{ image.image.url }}" class="img-carousel-size" alt="Изображение товара">
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>